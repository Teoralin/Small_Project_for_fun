<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IIS Documentation</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            line-height: 1.6;
        }
        table {
            width: 50%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th, td {
            border: 1px solid black;
            padding: 10px;
            text-align: left;
        }
        th {
            background-color: lightgray;
        }
    </style>
</head>
<body>
<h1>IIS Documentation</h1>

<dl>
    <dt><h2>Authors</h2></dt>
    <dd><strong><em>Anastasiia Chumachenko</em></strong> <a href="mailto:xchuma00@stud.fit.vutbr.cz">xchuma00@stud.fit.vutbr.cz</a> Database management, CSS for every single page, formatting and editing of front-end pages.</dd>
    <dd><strong>Nadzeya Antsipenka</strong> <a href="mailto:xantsi00@stud.fit.vutbr.cz">xantsi00@stud.fit.vutbr.cz</a> Creating most of the routes for linking the frontend and backend, creating pages and logic for processing user interaction.</dd>
    <dd><strong>Nestor Baraniuk</strong> <a href="mailto:xbaran21@stud.fit.vutbr.cz">xbaran21@stud.fit.vutbr.cz</a> Creating models, routes, middleware, creating pages and implementing user interaction logic.</dd>
    <dt><h2>Links</h2></dt>
    <dd><strong>Frontend: </strong><a href="https://frontend-rc79.onrender.com">https://frontend-rc79.onrender.com</a> - home page of IS</dd>
    <dd><strong>Backend: </strong><a href="https://backend-4g4p.onrender.com"> https://backend-4g4p.onrender.com</a> - only shows server status</dd>
</dl>

<h2>Test Users</h2>
<p>The table with testing accounts:</p>
<table>
    <thead>
    <tr>
        <th>User Role</th>
        <th>Login</th>
        <th>Password</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td>Administrator</td>
        <td>admin@gmail.com</td>
        <td>Admin</td>
    </tr>
    <tr>
        <td>Moderator</td>
        <td>moderator@gmail.com</td>
        <td>Moderator</td>
    </tr>
    <tr>
        <td>Farmer</td>
        <td>farmer@gmail.com</td>
        <td>Farmer</td>
    </tr>
    <tr>
        <td>Customer</td>
        <td>customer@gmail.com</td>
        <td>Customer</td>
    </tr>
    </tbody>
</table>

<p>There are 3 roles: Administrator, Moderator and Registered User. Every user can be a Farmer, they have to mark corresponding checkbox during registration and fill address</p>
<img src="frontend/public/UseCase.png" alt="desc">

<h3>Database</h3>
<img src="frontend/public/Db.png" alt="desc">

<h2>Implementation</h2>
The frontend and backend of our project are two self-existent parts.
<h3>Backend</h3>
<p>Backend's purpose is to process all API calls from
frontend and to work with database.</p>
The backend is implemented using <strong>Node.js</strong> with <strong>Express.js</strong> as the framework.
It uses <strong>Sequelize ORM</strong> to interact with a <strong>MySQL database.</strong>
Models represent database tables, and associations define relationships between them.
To authenticate the user, we used <strong>JWT</strong>, which are generated by the backend and passed to the frontend.
Certain routes require this token, so frontend passes them back in headers. In fact, most of the backend code is models and routes.
Each model (table) has its own route. Thus, the route for orders is responsible for user orders, and the route for product reviews is responsible for product reviews.
But in fact, routes have more complex logic and act as controllers. They validate the input data and can work with several tables, according to the call.
Routes for interacting with database use <strong>Sequelize methods.</strong>
<p>To enable communication with frontend, we used <strong>CORS</strong>.</p>
Backend is deployed as Node.js application on Render, and it listens for all requests from the frontend.

<h3>Frontend</h3>
The frontend is implemented using <strong>React</strong> (with <strong>Vite</strong> used for building).
Basically, it is a user interface for interacting with the system, which communicates with the backend if needed.

For user navigation between pages we used <strong>react-router-dom</strong>.
For each page we implemented a state logic that shows and hides certain parts of the page, depending on the user's action and role.
We used <strong>React useState</strong> and <strong>useEffect</strong> hooks for that and <strong>axios</strong> library for all API requests.
The tokens generated by the backend are stored in LocalStorage, so the user remains logged in after the site is closed.
But user still needs to log in again after the token itself expires.
<h2>Installation</h2>
<ul>
    <li>Install Node.js</li>
    <li>Set up MySQL database</li>
</ul>

<h2>Backend Configuration</h2>
<ol>
    <li>Unzip the project folder.</li>
    <li>Move to the backend folder</li>
    <pre><code>cd backend</code></pre>
    <li>Install required dependencies:</li>
    <pre><code>npm install</code></pre>
    <li>Create a <code>.env</code> file in the backend folder with the following content:
        <pre><code>
MYSQL_HOST='Host'
MYSQL_USER='Username'
MYSQL_PASSWORD='Pass'
MYSQL_DB='databaseName'

JWT_SECRET=SomeSecretKey
            </code></pre>
    </li>
    <li>Run the backend server:</li>
    <pre><code>npm run app</code></pre>
    <li>If you need to initialize the database (drop and recreate tables), use:</li>
    <pre><code>npm run init-db</code></pre>
    or
    <pre><code>npm run init-and-fill</code></pre> which will add 4 default users to the database.
</ol>

<h2>Frontend Configuration</h2>
<ol>
    <li>Move to the frontend folder</li>
    <li>Install required dependencies:</li>
    <pre><code>npm install</code></pre>
    <li>Start the development server:</li>
    <pre><code>npm run dev</code></pre>
    <li>Open the provided URL in browser (should be <code>http://localhost:5173</code>).</li>
</ol>

<h4>Note: ensure the backend is running before starting the frontend.</h4>

<h2>Known issues</h2>
We have not added different types of quantity measures (“units/kg”).
We have not added the ability to compare prices and filter offers by them.
</body>
</html>
